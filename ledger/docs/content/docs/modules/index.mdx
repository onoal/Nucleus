---
title: Modules
description: Built-in modules for Ledger Framework
---

# Modules

Ledger Framework comes with four built-in modules:

- **Core Routes Module** - Essential ledger endpoints (health, hash-root, verify, stats, status, jwks)
- **Proof Module** - Create and query proofs
- **Asset Module** - Issue and query assets
- **Connect Module** - Manage connect grants and events

## Core Routes Module

Provides essential ledger endpoints that don't belong to specific modules.

```typescript
import { coreRoutesModule } from "@onoal/ledger-core";

const ledger = createLedger({
  modules: [
    coreRoutesModule(), // Add core routes
    // ... other modules
  ],
});
```

### Routes

- `GET /health` - Health check
- `GET /ledger/hash-root` - Get hash root of the chain
- `GET /ledger/verify` - Verify chain integrity
- `GET /ledger/stats` - Get ledger statistics
- `GET /ledger/status/:oid` - Get ledger status for an OID (requires auth)
- `GET /.well-known/jwks.json` - JWKS endpoint for JWT verification

## Modules

Ledger Framework comes with three feature modules:

- **[Proof Module](/docs/modules/proof)** - Create and query proofs
- **[Asset Module](/docs/modules/asset)** - Issue and query assets
- **[Connect Module](/docs/modules/connect)** - Manage connect grants and events

## Proof Module

Manages proof creation and querying with full JWT support.

See the [Proof Module documentation](/docs/modules/proof) for detailed API reference.

### Service

```typescript
const service = ledger.getService<ProofService>("proofService");

// Create proof
const entry = await service.createProof({
  subject_oid: "oid:onoal:user:alice",
  issuer_oid: "oid:onoal:org:identity",
  target: "oid:onoal:asset:123",
  type: "AgeOver18",
  payload: {
    age: 25,
    verified: true,
  },
});

// Query proofs
const { entries } = await service.queryProofs({
  subject_oid: "oid:onoal:user:alice",
  type: "AgeOver18",
  limit: 20,
});

// Get proof by ID
const proof = await service.getProof(entry.id);
```

### Routes

- `POST /ledger/submit` - Submit proof
- `GET /ledger/proof/:id` - Get proof by ID
- `GET /ledger/proofs` - Query proofs

## Asset Module

Manages asset issuance and querying with asset JWT generation.

See the [Asset Module documentation](/docs/modules/asset) for detailed API reference.

### Service

```typescript
const service = ledger.getService<AssetService>("assetService");

// Issue asset
const result = await service.issueAsset({
  issuer_oid: "oid:onoal:org:festival",
  owner_oid: "oid:onoal:user:alice",
  type: "ticket",
  payload: {
    event: "Summer Festival",
    section: "VIP",
    seat: "A1",
  },
});

// Query assets
const { entries } = await service.queryAssets({
  owner_oid: "oid:onoal:user:alice",
  type: "ticket",
  limit: 20,
});

// Get asset by ID
const asset = await service.getAsset(entry.id);
```

### Routes

- `POST /asset/issue` - Issue asset
- `GET /asset/:id` - Get asset by ID
- `GET /asset/list` - Query assets

## Connect Module

Manages connect grants and events for OAuth-like authorization.

See the [Connect Module documentation](/docs/modules/connect) for detailed API reference.

### Service

```typescript
const service = ledger.getService<ConnectService>("connectService");

// Create grant
const entry = await service.createGrant({
  app_oid: "oid:onoal:app:festival-app",
  subject_oid: "oid:onoal:user:alice",
  scopes: ["read:profile", "read:assets"],
  exp: Math.floor(Date.now() / 1000) + 3600, // 1 hour
});

// Query grants
const { entries } = await service.queryGrants({
  app_oid: "oid:onoal:app:festival-app",
  subject_oid: "oid:onoal:user:alice",
  status: "active",
});

// Get grant by ID
const grant = await service.getGrant(entry.id);

// Create event
await service.createEvent({
  event_type: "grant_used",
  app_oid: "oid:onoal:app:festival-app",
  subject_oid: "oid:onoal:user:alice",
  grant_id: entry.id,
  scopes: ["read:profile"],
});
```

### Routes

- `POST /connect/grant` - Create connect grant
- `GET /connect/grant/:id` - Get grant by ID
- `GET /connect/grants` - Query grants

## Filtering

All `query*()` methods support filtering by:

- `subject_oid` - Filter by subject OID
- `issuer_oid` - Filter by issuer OID
- `owner_oid` - Filter by owner OID (assets)
- `app_oid` - Filter by app OID (connect)
- `type` - Filter by type
- `status` - Filter by status
- `limit` - Limit results
- `cursor` - Pagination cursor

## Creating Custom Modules

You can create custom modules by implementing the `OnoalLedgerModule` interface:

```typescript
import type { OnoalLedgerModule } from "@onoal/ledger-core";

export function myCustomModule(): OnoalLedgerModule {
  return {
    id: "myCustom",
    label: "My Custom Module",
    version: "1.0.0",
    services: {
      myService: MyService,
    },
    routes: [
      {
        method: "GET",
        path: "/my-custom",
        handler: async (req, ledger, params) => {
          // ...
        },
      },
    ],
  };
}
```

## Next Steps

- [Adapters](/docs/adapters) - Choose your database backend
- [API Server](/docs/api-server) - Expose your ledger via REST API
